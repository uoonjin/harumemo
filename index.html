<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>하루메모</title>

  <!-- PWA 설정 -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#FFB5DA">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <link rel="apple-touch-icon" href="icons/icon-192x192.png">

  <!-- 스타일시트 -->
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- ========================================
       메인 화면 (달력)
       ======================================== -->
  <section id="main-screen" class="screen active">
    <!-- 헤더 -->
    <header class="main-header">
      <button class="nav-btn" id="btn-prev-month" aria-label="이전 달">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <h1 class="month-title" id="month-title">2026년 1월</h1>
      <button class="nav-btn" id="btn-next-month" aria-label="다음 달">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="9 18 15 12 9 6"></polyline>
        </svg>
      </button>
    </header>

    <!-- 달력 -->
    <div class="calendar-container">
      <!-- 요일 헤더 -->
      <div class="weekday-header">
        <span>월</span>
        <span>화</span>
        <span>수</span>
        <span>목</span>
        <span>금</span>
        <span>토</span>
        <span>일</span>
      </div>

      <!-- 날짜 그리드 -->
      <div class="calendar-grid" id="calendar-grid">
        <!-- JavaScript로 동적 생성 -->
      </div>
    </div>

    <!-- 더보기 메뉴 (FAB) -->
    <div class="fab-menu-wrapper">
      <button class="fab-button" id="btn-more" aria-label="더보기">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="5" r="1.5"></circle>
          <circle cx="12" cy="12" r="1.5"></circle>
          <circle cx="12" cy="19" r="1.5"></circle>
        </svg>
      </button>
      <div class="fab-more-menu" id="more-menu">
        <button class="more-menu-item" id="btn-new-memo">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M12 20h9"></path>
            <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
          </svg>
          <span>새 메모 작성</span>
        </button>
        <button class="more-menu-item" id="btn-export">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="7 10 12 15 17 10"></polyline>
            <line x1="12" y1="15" x2="12" y2="3"></line>
          </svg>
          <span>메모 내보내기</span>
        </button>
        <button class="more-menu-item" id="btn-import">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
            <polyline points="17 8 12 3 7 8"></polyline>
            <line x1="12" y1="3" x2="12" y2="15"></line>
          </svg>
          <span>메모 가져오기</span>
        </button>
        <button class="more-menu-item" id="btn-darkmode">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
          </svg>
          <span>다크모드</span>
        </button>
      </div>
    </div>
  </section>

  <!-- ========================================
       메모 작성/수정 화면
       ======================================== -->
  <section id="memo-screen" class="screen">
    <!-- 헤더 -->
    <header class="memo-header">
      <button class="header-btn" id="btn-back" aria-label="뒤로가기">
        <span>&lt;뒤로</span>
      </button>
      <div class="header-actions">
        <button class="header-btn" id="btn-save">완료</button>
      </div>
    </header>

    <!-- 메모 입력 영역 -->
    <div class="memo-content">
      <textarea
        id="memo-textarea"
        class="memo-textarea"
        placeholder="메모내용입력"
      ></textarea>
      <!-- 이미지 미리보기 영역 -->
      <div class="image-preview-container" id="image-preview-container">
        <!-- JavaScript로 동적 생성 -->
      </div>
    </div>

    <!-- 하단 툴바 -->
    <footer class="memo-toolbar">
      <div class="toolbar-btn-wrapper">
        <button class="toolbar-btn" id="btn-text" aria-label="텍스트">
          <span>가</span>
        </button>
        <!-- 텍스트 크기 팝업 메뉴 -->
        <div class="popup-menu" id="text-size-popup">
          <button class="popup-item" data-size="small">작게</button>
          <button class="popup-item" data-size="medium">보통</button>
          <button class="popup-item" data-size="large">크게</button>
        </div>
      </div>
      <button class="toolbar-btn" id="btn-checklist" aria-label="체크리스트">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 11l3 3L22 4"></path>
          <path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"></path>
        </svg>
      </button>
      <button class="toolbar-btn" id="btn-attach" aria-label="첨부파일">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path>
        </svg>
      </button>
      <button class="toolbar-btn" id="btn-draw" aria-label="그리기">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 19l7-7 3 3-7 7-3-3z"></path>
          <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path>
          <path d="M2 2l7.586 7.586"></path>
        </svg>
      </button>
      <button class="toolbar-btn" id="btn-close" aria-label="닫기">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
    </footer>
  </section>

  <!-- ========================================
       상세보기 화면
       ======================================== -->
  <section id="detail-screen" class="screen">
    <!-- 헤더 -->
    <header class="detail-header">
      <button class="header-btn" id="btn-detail-back" aria-label="뒤로가기">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="15 18 9 12 15 6"></polyline>
        </svg>
      </button>
      <span class="detail-date" id="detail-date">2026년 1월 1일</span>
      <button class="header-btn" id="btn-detail-edit" aria-label="수정">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 20h9"></path>
          <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
        </svg>
      </button>
    </header>

    <!-- 메모 내용 -->
    <div class="detail-content">
      <div class="detail-text" id="detail-text"></div>
      <div class="detail-images" id="detail-images"></div>
    </div>

    <!-- 하단 액션 바 -->
    <footer class="detail-actions">
      <button class="detail-action-btn" id="btn-detail-share">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"></path>
          <polyline points="16 6 12 2 8 6"></polyline>
          <line x1="12" y1="2" x2="12" y2="15"></line>
        </svg>
        <span>공유</span>
      </button>
      <button class="detail-action-btn" id="btn-detail-copy">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
          <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
        </svg>
        <span>복사</span>
      </button>
      <button class="detail-action-btn danger" id="btn-detail-delete">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="3 6 5 6 21 6"></polyline>
          <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
        </svg>
        <span>삭제</span>
      </button>
    </footer>
  </section>

  <!-- 숨겨진 파일 입력 (백업 가져오기용) -->
  <input type="file" id="import-file-input" accept=".json" style="display: none;">

  <!-- 이미지 첨부용 파일 입력 -->
  <input type="file" id="image-file-input" accept="image/*" style="display: none;">

  <!-- ========================================
       그리기 화면 (캔버스)
       ======================================== -->
  <section id="draw-screen" class="screen">
    <!-- 그리기 헤더 -->
    <header class="draw-header">
      <button class="header-btn" id="btn-draw-cancel">취소</button>
      <span class="draw-title">그리기</span>
      <button class="header-btn" id="btn-draw-save">완료</button>
    </header>

    <!-- 캔버스 영역 -->
    <div class="canvas-container">
      <canvas id="draw-canvas"></canvas>
    </div>

    <!-- 그리기 툴바 -->
    <footer class="draw-toolbar">
      <div class="color-picker">
        <button class="color-btn active" data-color="#333333" style="background-color: #333333;"></button>
        <button class="color-btn" data-color="#FF6B6B" style="background-color: #FF6B6B;"></button>
        <button class="color-btn" data-color="#4ECDC4" style="background-color: #4ECDC4;"></button>
        <button class="color-btn" data-color="#FFE66D" style="background-color: #FFE66D;"></button>
      </div>
      <div class="draw-actions">
        <button class="draw-action-btn" id="btn-eraser">지우개</button>
        <button class="draw-action-btn" id="btn-clear-canvas">전체 지우기</button>
      </div>
    </footer>
  </section>

  <!-- 스크립트 -->
  <script src="js/app.js"></script>
  <script src="js/sw-register.js"></script>
</body>
</html>
